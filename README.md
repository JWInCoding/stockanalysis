# 股票数据分析工具 v2.1 - 简化模块化版本

这是一个功能完整的股票数据分析工具，支持获取股票的技术面、基本面、行业面、资金面等全方位数据。v2.1版本采用了简化的模块化架构，项目结构清晰，易于使用。

## 📁 项目结构

```
stockanalysis/
├── README.md                    # 项目说明文档
├── start_stock.sh              # 启动脚本
├── requirements.txt            # 依赖包清单
├── src/                        # 源代码目录
│   ├── main/                   # 主程序
│   │   └── stock_analyzer.py   # 主分析脚本
│   ├── modules/                # 数据获取模块
│   │   ├── stock_data.py       # 日线数据获取
│   │   ├── stock_minute_data.py # 分钟级数据获取
│   │   ├── stock_fundamental.py # 基本面数据获取
│   │   ├── stock_industry.py   # 行业板块数据获取
│   │   ├── stock_capital_flow.py # 资金流向数据获取
│   │   ├── stock_index_component.py # 指数成分股数据获取
│   │   └── stock_sentiment.py  # 市场情绪数据获取
│   └── utils/                  # 工具函数
│       ├── validators.py       # 代码验证工具
│       └── file_utils.py       # 文件处理工具
├── outputs/                    # 输出目录
│   └── stock_results/          # 分析结果存放目录
└── stock_env/                 # Python虚拟环境（自动创建）
```

## 🚀 快速开始

### 1. 环境准备

**确保脚本有执行权限：**

```bash
chmod +x start_stock.sh
```

**首次使用：**

```bash
cd ~/stockanalysis
./start_stock.sh
```

启动脚本会自动：
- 创建必要的目录结构
- 创建Python虚拟环境
- 安装必要的依赖包
- 提供AKShare更新选项

### 2. 使用方法

#### 方式1: 交互式使用（推荐）

```bash
./start_stock.sh
```

然后按照提示：
1. 输入股票代码（如：000001、sz002354）
2. 选择分析模式（基础/全面/自定义）
3. 查看分析结果

#### 方式2: 命令行直接使用

```bash
# 激活环境后直接分析
source stock_env/bin/activate
python3 -m src.main.stock_analyzer 000001
```

#### 方式3: 单独使用某个模块

```bash
# 激活环境
source stock_env/bin/activate

# 仅获取基本面数据
python3 -m src.modules.stock_fundamental 000001

# 仅获取资金流向数据  
python3 -m src.modules.stock_capital_flow 000001
```

## 📊 功能模块

### 核心数据模块

| 模块 | 功能 | 包含数据 |
|------|------|----------|
| **日线数据** | 技术分析基础 | K线、MA、MACD、RSI、布林带等技术指标 |
| **分钟级数据** | 短期分析 | 5分钟、15分钟、60分钟K线数据 |
| **基本面数据** | 财务分析 | 三大财务报表、财务摘要、分红配股 |
| **行业板块** | 行业分析 | 行业分类、板块资金流向、同行对比 |
| **资金流向** | 资金面分析 | 主力资金、北向资金、融资融券、龙虎榜 |
| **指数成分股** | 指数分析 | 成分股列表、权重分布、指数表现 |
| **市场情绪** | 情绪面分析 | 涨跌停统计、热度排行、恐慌贪婪指数 |

### 分析模式

1. **基础分析**: 日线 + 分钟级数据
2. **全面分析**: 包含所有7个数据模块  
3. **自定义分析**: 按需选择特定模块

## 📈 支持的股票代码格式

- **A股股票**:
  - 带市场前缀: `sz000001`、`sh600000`、`bj835185`
  - 纯数字: `000001`、`600000`
  
- **指数**:
  - 带市场前缀: `sh000001`、`sz399001`
  - 纯数字: `000001`、`399001`
  - 老式代码: `1A0001`(上证指数)

## 📁 输出结果

所有分析结果保存在 `outputs/stock_results/日期/` 目录下：

```
outputs/stock_results/20250724/
├── 000001_上证指数_日线数据_20250724_143022.txt
├── 000001_上证指数_基本面数据_20250724_143025.txt
├── 000001_上证指数_资金流向_20250724_143028.txt
└── ...
```

文件名格式: `[股票代码]_[股票名称]_[数据类型]_[日期时间].txt`

## 🔧 常见问题

**Q: 模块导入失败？**  
A: 确保在项目根目录运行，启动脚本会自动设置Python路径。

**Q: 某个数据模块获取失败？**  
A: 
1. 检查网络连接
2. 确认股票代码格式正确
3. 尝试更新AKShare到最新版本

**Q: 如何批量分析多只股票？**  
A: 使用连续分析功能，在分析完一只股票后输入下一只股票代码。

**Q: 输出文件在哪里？**  
A: 默认在 `outputs/stock_results/日期/` 目录下，按日期自动组织。

## 🔄 版本说明

### v2.1 主要特性
- ✅ 简化的模块化架构
- ✅ 清晰的目录结构（仅必要目录）
- ✅ 标准化的工具函数
- ✅ 改进的错误处理
- ✅ 保持所有原有功能

### 目录说明
- `src/main/`: 主程序入口
- `src/modules/`: 各数据获取模块
- `src/utils/`: 验证和文件处理工具
- `outputs/`: 结果输出目录

---

**🎯 这个工具旨在为股票投资者提供全面、准确、及时的数据支持，助力做出更明智的投资决策！**